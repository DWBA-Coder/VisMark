# VisMark - 智能图像水印处理工具

## 项目简介

VisMark是一个功能强大的智能图像水印处理工具，基于Python开发，提供直观的可视化界面和丰富的水印处理功能。项目采用模块化设计，支持文字水印、Logo水印、智能定位、批量处理等高级特性。

## 许可证

本项目采用 **Mozilla Public License 2.0 (MPL 2.0)** 许可证。

```text
版权所有 (c) 2024 VisMark项目组

本源代码的使用受Mozilla Public License 2.0的约束，该许可证可在以下位置获取：
http://mozilla.org/MPL/2.0/
```

## 核心功能

### 🎨 水印类型支持
- **文字水印**：支持自定义文本、字体、颜色、样式（粗体/斜体/下划线）
- **Logo水印**：支持图片Logo上传、尺寸调整、透明度控制
- **安全水印**：隐形水印和数字水印技术

### 🧠 智能处理功能
- **智能定位**：基于亮度分析的自动水印位置推荐
- **实时预览**：即时显示水印效果，支持缩放和对比查看
- **批量处理**：多线程并发处理大量图片

### ⚙️ 高级水印效果
- **特殊水印**：分散水印、纹理水印、隐形水印
- **样式变换**：旋转、翻转、透明度调节
- **阴影效果**：文字阴影支持，增强视觉效果

## 技术架构

### 开发环境
- **编程语言**：Python 3.8+
- **GUI框架**：Tkinter
- **图像处理**：Pillow (PIL)
- **并发处理**：concurrent.futures

### 项目结构
```
VisMark/
├── main.py                    # 程序主入口
├── gui_main.py               # 主GUI控制器
├── gui_components/           # GUI组件模块
│   ├── control_panel.py      # 控制面板
│   ├── menu_bar.py          # 菜单栏
│   ├── toolbar.py           # 工具栏
│   ├── image_preview.py     # 图片预览
│   └── control_sections/    # 控制子组件
├── watermark_processor/      # 水印处理核心
│   ├── base_processor.py    # 处理器基类
│   ├── text_watermark.py    # 文字水印处理
│   ├── logo_watermark.py    # Logo水印处理
│   └── security_watermark.py # 安全水印处理
└── utils.py                 # 工具函数库
```

## 安装指南

### 环境要求
- Python 3.8 或更高版本
- Windows 10/11 或支持Tkinter的操作系统

### 安装步骤

1. **克隆项目**
   ```bash
   git clone https://github.com/your-repo/VisMark.git
   cd VisMark
   ```

2. **创建虚拟环境（推荐）**
   ```bash
   python -m venv .venv
   .venv\Scripts\activate  # Windows
   ```

3. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

4. **运行程序**
   ```bash
   python main.py
   ```

## 使用说明

### 基本操作流程

1. **加载图片**
   - 点击"文件" → "打开图片"或工具栏按钮
   - 支持格式：JPG、PNG、BMP、GIF、TIFF

2. **配置水印参数**
   - 选择水印类型（文字/Logo）
   - 调整字体、颜色、大小、位置
   - 设置透明度、旋转角度等效果

3. **应用水印**
   - 实时预览水印效果
   - 点击"应用水印"生成最终图片
   - 保存处理后的图片

### 批量处理模式

1. 选择"文件" → "批量处理"
2. 指定输入文件夹和输出目录
3. 系统自动处理所有图片并显示进度
4. 处理完成后在输出目录查看结果

### 智能功能使用

- **智能定位**：点击"智能放置"按钮，系统自动分析图片亮度分布，推荐最佳水印位置
- **特殊效果**：在"水印功能"中选择分散水印、隐形水印等特殊效果
- **样式模板**：保存常用水印配置，快速应用到不同图片

## 功能特性详解

### 文字水印处理
- 完整的中文字体支持（宋体、微软雅黑等）
- 字体样式组合（粗体+斜体+下划线）
- 精确的文字渲染和位置计算
- 阴影效果和透明度控制

### Logo水印处理
- 支持透明PNG格式Logo
- 智能尺寸调整和比例锁定
- 重着色功能，适配图片色调
- 高质量图像合成算法

### 智能算法
- **亮度分析算法**：计算图片角落亮度，选择最暗区域放置水印
- **图像融合算法**：Alpha通道混合，实现自然的水印融合效果
- **批量优化算法**：多线程处理，内存优化，错误恢复机制

## 开发贡献

### 代码规范
- 遵循PEP 8 Python编码规范
- 使用有意义的变量和函数命名
- 提供完整的代码注释和文档

### 模块扩展
项目采用模块化设计，便于功能扩展：
- 新增水印处理器：继承`BaseWatermarkProcessor`
- 添加GUI组件：在`gui_components`目录创建新模块
- 扩展控制功能：在`control_sections`添加子组件

### 测试验证
运行测试脚本验证模块完整性：
```bash
python test_refactored_gui.py
```

## 故障排除

### 常见问题

1. **图片加载失败**
   - 检查文件格式支持
   - 确认文件路径正确
   - 验证图片文件完整性

2. **字体显示异常**
   - 确保系统中安装相应字体
   - 检查字体文件权限

3. **内存不足**
   - 减少同时处理的图片数量
   - 关闭其他占用内存的程序

### 日志查看
程序运行日志保存在临时目录，可通过控制台查看详细错误信息。

## 技术支持

### 问题反馈
如遇使用问题或发现bug，请通过以下方式反馈：
- GitHub Issues：提交详细的问题描述和复现步骤
- 邮件支持：提供系统环境和错误日志

### 版本更新
定期检查项目更新，获取最新功能和安全修复。

## 免责声明

本软件按“原样”提供，不提供任何明示或暗示的担保。使用者需自行承担使用风险。对于因使用本软件而导致的任何直接或间接损失，开发者不承担任何责任。

## 致谢

感谢所有为VisMark项目做出贡献的开发者，以及使用本工具的用户提供的宝贵反馈。

---

*VisMark - 让图像水印处理更智能、更便捷*
        
